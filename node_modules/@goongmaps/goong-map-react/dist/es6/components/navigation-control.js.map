{"version":3,"file":"navigation-control.js","names":["React","useMemo","PropTypes","MapState","LINEAR_TRANSITION_PROPS","useMapControl","mapControlDefaultProps","mapControlPropTypes","noop","propTypes","Object","assign","className","string","style","object","onViewStateChange","func","onViewportChange","showCompass","bool","showZoom","zoomInLabel","zoomOutLabel","compassLabel","defaultProps","updateViewport","context","props","opts","viewport","mapState","viewState","getViewportProps","renderButton","type","label","callback","children","renderCompass","bearing","transform","NavigationControl","containerRef","onZoomIn","zoom","onZoomOut","onResetNorth","pitch","position","memo"],"sources":["../../../src/components/navigation-control.js"],"sourcesContent":["import * as React from 'react';\nimport {useMemo} from 'react';\nimport * as PropTypes from 'prop-types';\n\nimport MapState from '../utils/map-state';\nimport {LINEAR_TRANSITION_PROPS} from '../utils/map-controller';\n\nimport useMapControl, {mapControlDefaultProps, mapControlPropTypes} from './use-map-control';\n\nconst noop = () => {};\n\nconst propTypes = Object.assign({}, mapControlPropTypes, {\n  // Custom className\n  className: PropTypes.string,\n  style: PropTypes.object,\n  // Callbacks fired when the user interacted with the map. The object passed to the callbacks\n  // contains viewport properties such as `longitude`, `latitude`, `zoom` etc.\n  onViewStateChange: PropTypes.func,\n  onViewportChange: PropTypes.func,\n  // Show/hide compass button\n  showCompass: PropTypes.bool,\n  // Show/hide zoom buttons\n  showZoom: PropTypes.bool,\n  // Custom labels assigned to the controls\n  zoomInLabel: PropTypes.string,\n  zoomOutLabel: PropTypes.string,\n  compassLabel: PropTypes.string\n});\n\nconst defaultProps = Object.assign({}, mapControlDefaultProps, {\n  className: '',\n  showCompass: true,\n  showZoom: true,\n  zoomInLabel: 'Zoom In',\n  zoomOutLabel: 'Zoom Out',\n  compassLabel: 'Reset North'\n});\n\nfunction updateViewport(context, props, opts) {\n  const {viewport} = context;\n  const mapState = new MapState(Object.assign({}, viewport, opts));\n  const viewState = Object.assign({}, mapState.getViewportProps(), LINEAR_TRANSITION_PROPS);\n\n  const onViewportChange = props.onViewportChange || context.onViewportChange || noop;\n  const onViewStateChange = props.onViewStateChange || context.onViewStateChange || noop;\n\n  // Call new style callback\n  onViewStateChange({viewState});\n\n  // Call old style callback\n  onViewportChange(viewState);\n}\n\nfunction renderButton(type, label, callback, children) {\n  return (\n    <button\n      key={type}\n      className={`mapboxgl-ctrl-icon mapboxgl-ctrl-${type}`}\n      type=\"button\"\n      title={label}\n      onClick={callback}\n    >\n      {children || <span className=\"mapboxgl-ctrl-icon\" aria-hidden=\"true\" />}\n    </button>\n  );\n}\n\nfunction renderCompass(context) {\n  const {bearing} = context.viewport;\n  const style = {transform: `rotate(${-bearing}deg)`};\n\n  return <span className=\"mapboxgl-ctrl-icon\" aria-hidden=\"true\" style={style} />;\n}\n\n/*\n * PureComponent doesn't update when context changes, so\n * implementing our own shouldComponentUpdate here.\n */\nfunction NavigationControl(props) {\n  const {context, containerRef} = useMapControl(props);\n\n  const onZoomIn = () => {\n    updateViewport(context, props, {zoom: context.viewport.zoom + 1});\n  };\n\n  const onZoomOut = () => {\n    updateViewport(context, props, {zoom: context.viewport.zoom - 1});\n  };\n\n  const onResetNorth = () => {\n    updateViewport(context, props, {bearing: 0, pitch: 0});\n  };\n\n  const {className, showCompass, showZoom, zoomInLabel, zoomOutLabel, compassLabel} = props;\n  const style = useMemo(() => ({position: 'absolute', ...props.style}), [props.style]);\n\n  return (\n    <div style={style} className={className}>\n      <div className=\"mapboxgl-ctrl mapboxgl-ctrl-group\" ref={containerRef}>\n        {showZoom && renderButton('zoom-in', zoomInLabel, onZoomIn)}\n        {showZoom && renderButton('zoom-out', zoomOutLabel, onZoomOut)}\n        {showCompass && renderButton('compass', compassLabel, onResetNorth, renderCompass(context))}\n      </div>\n    </div>\n  );\n}\n\nNavigationControl.propTypes = propTypes;\nNavigationControl.defaultProps = defaultProps;\n\nexport default React.memo(NavigationControl);\n"],"mappings":"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"}