{"version":3,"file":"navigation-control.js","names":["noop","propTypes","Object","assign","mapControlPropTypes","className","PropTypes","string","style","object","onViewStateChange","func","onViewportChange","showCompass","bool","showZoom","zoomInLabel","zoomOutLabel","compassLabel","defaultProps","mapControlDefaultProps","updateViewport","context","props","opts","viewport","mapState","MapState","viewState","getViewportProps","LINEAR_TRANSITION_PROPS","renderButton","type","label","callback","children","renderCompass","bearing","transform","NavigationControl","useMapControl","containerRef","onZoomIn","zoom","onZoomOut","onResetNorth","pitch","useMemo","position","React","memo"],"sources":["../../../src/components/navigation-control.js"],"sourcesContent":["import * as React from 'react';\nimport {useMemo} from 'react';\nimport * as PropTypes from 'prop-types';\n\nimport MapState from '../utils/map-state';\nimport {LINEAR_TRANSITION_PROPS} from '../utils/map-controller';\n\nimport useMapControl, {mapControlDefaultProps, mapControlPropTypes} from './use-map-control';\n\nconst noop = () => {};\n\nconst propTypes = Object.assign({}, mapControlPropTypes, {\n  // Custom className\n  className: PropTypes.string,\n  style: PropTypes.object,\n  // Callbacks fired when the user interacted with the map. The object passed to the callbacks\n  // contains viewport properties such as `longitude`, `latitude`, `zoom` etc.\n  onViewStateChange: PropTypes.func,\n  onViewportChange: PropTypes.func,\n  // Show/hide compass button\n  showCompass: PropTypes.bool,\n  // Show/hide zoom buttons\n  showZoom: PropTypes.bool,\n  // Custom labels assigned to the controls\n  zoomInLabel: PropTypes.string,\n  zoomOutLabel: PropTypes.string,\n  compassLabel: PropTypes.string\n});\n\nconst defaultProps = Object.assign({}, mapControlDefaultProps, {\n  className: '',\n  showCompass: true,\n  showZoom: true,\n  zoomInLabel: 'Zoom In',\n  zoomOutLabel: 'Zoom Out',\n  compassLabel: 'Reset North'\n});\n\nfunction updateViewport(context, props, opts) {\n  const {viewport} = context;\n  const mapState = new MapState(Object.assign({}, viewport, opts));\n  const viewState = Object.assign({}, mapState.getViewportProps(), LINEAR_TRANSITION_PROPS);\n\n  const onViewportChange = props.onViewportChange || context.onViewportChange || noop;\n  const onViewStateChange = props.onViewStateChange || context.onViewStateChange || noop;\n\n  // Call new style callback\n  onViewStateChange({viewState});\n\n  // Call old style callback\n  onViewportChange(viewState);\n}\n\nfunction renderButton(type, label, callback, children) {\n  return (\n    <button\n      key={type}\n      className={`mapboxgl-ctrl-icon mapboxgl-ctrl-${type}`}\n      type=\"button\"\n      title={label}\n      onClick={callback}\n    >\n      {children || <span className=\"mapboxgl-ctrl-icon\" aria-hidden=\"true\" />}\n    </button>\n  );\n}\n\nfunction renderCompass(context) {\n  const {bearing} = context.viewport;\n  const style = {transform: `rotate(${-bearing}deg)`};\n\n  return <span className=\"mapboxgl-ctrl-icon\" aria-hidden=\"true\" style={style} />;\n}\n\n/*\n * PureComponent doesn't update when context changes, so\n * implementing our own shouldComponentUpdate here.\n */\nfunction NavigationControl(props) {\n  const {context, containerRef} = useMapControl(props);\n\n  const onZoomIn = () => {\n    updateViewport(context, props, {zoom: context.viewport.zoom + 1});\n  };\n\n  const onZoomOut = () => {\n    updateViewport(context, props, {zoom: context.viewport.zoom - 1});\n  };\n\n  const onResetNorth = () => {\n    updateViewport(context, props, {bearing: 0, pitch: 0});\n  };\n\n  const {className, showCompass, showZoom, zoomInLabel, zoomOutLabel, compassLabel} = props;\n  const style = useMemo(() => ({position: 'absolute', ...props.style}), [props.style]);\n\n  return (\n    <div style={style} className={className}>\n      <div className=\"mapboxgl-ctrl mapboxgl-ctrl-group\" ref={containerRef}>\n        {showZoom && renderButton('zoom-in', zoomInLabel, onZoomIn)}\n        {showZoom && renderButton('zoom-out', zoomOutLabel, onZoomOut)}\n        {showCompass && renderButton('compass', compassLabel, onResetNorth, renderCompass(context))}\n      </div>\n    </div>\n  );\n}\n\nNavigationControl.propTypes = propTypes;\nNavigationControl.defaultProps = defaultProps;\n\nexport default React.memo(NavigationControl);\n"],"mappings":"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"}